
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Megadrive-Maze 联合开发网 - pudn.com</title>

    <link href="/Public/m/css/bootstrap.min.css" rel="stylesheet">
    <link href="/Public/m/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/Public/m/css/animate.css" rel="stylesheet">
    <link href="/Public/m/css/style.css" rel="stylesheet">

	<link href="/Public/m/css/plugins/slick/slick.css" rel="stylesheet">
	<link href="/Public/m/css/plugins/slick/slick-theme.css" rel="stylesheet">

	

	<link href="/css/style.css" rel="stylesheet">

	<!-- Mainly scripts -->
	<script src="/Public/m/js/jquery-2.1.1.js"></script>
	<script src="/Public/m/js/bootstrap.min.js"></script>

	<script src="/Public/m/js/plugins/metisMenu/jquery.metisMenu.js"></script>
	<script src="/Public/m/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

	<!-- Custom and plugin javascript -->
	<script src="/Public/m/js/inspinia.js"></script>
	<script src="/Public/m/js/plugins/pace/pace.min.js"></script>
	
<META name="Keywords" content="Megadrive-Maze 程序员 编程 源码 源代码 下载">

	
<META name="Description" content="Megadrive-Maze 小型简单的世嘉Megadrive Genesis迷宫游戏，目标是与Clion一起构建。">

</head>

<body>

<!-- /.main-container start -->

<div class="pace  pace-inactive">
  	<div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  	<div class="pace-progress-inner"></div>
	</div>
	<div class="pace-activity"></div>
</div>

<div class="all-content">
	<div class="my-container top-navigation">
		<nav class="navbar navbar-static-top" role="navigation">
			<div class="navbar-header">
				<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
					<i class="fa fa-reorder"></i>
				</button>
				<a href="http://www.pudn.com" class="navbar-brand">联合开发网</a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li>
						<a href="/" style="padding-right:8px;padding-left:8px;font-size:16px">首页</a>
					</li>
					<li>
						<a href="https://search.pudn.com" style="padding-right:8px;padding-left:8px;font-size:16px">搜索</a>
					</li>
				</ul>
               	<ul class="nav navbar-top-links navbar-right">
               							<li>
                       	<a href="/User/login.html">
                           	&nbsp; <i class="fa fa-sign-out"></i>登录
                       	</a>
                   	</li>
                   	<li>
                       	<a href="/User/reg.html"><i class="fa fa-sign-out"></i>注册
                       	</a>
                   	</li>
					               	</ul>
			</div>
		</nav>
	</div>
	<form action="https://search.pudn.com/Download" method="get">
	<div class="top-menu-line2">
		<div class="my-container">
			<a href=/Download/upload.html>上传</a>
			&nbsp; <a href=/User>管理</a>
			&nbsp; <a href=https://search.pudn.com/Download>搜索</a>
			&nbsp; <a href=/Guestbook>留言</a>
			<div class="input-group pull-right" style="max-width:200px;margin:3px 15px 0px 0px">
				<input type="text" name="keyword" maxlength=20 placeholder="请输入关键字" class="form-control input-sm">
				<span class="input-group-btn"> <button type="submit" class="btn btn-white input-sm" style="border:1px solid #AAA"><i class="fa fa-search"></i></button>
				</span>
			</div>
		</div>
	</div></form>



<div class="row wrapper white-bg">
	<div class="my-container">
			<div class="nav-dir" style="padding:10px 0px">
				<a href="/">Pudn.com</a>&nbsp;&gt;&nbsp;下载中心
				&nbsp;&gt;&nbsp;游戏				&nbsp;&gt;&nbsp;<font color=red>Megadrive-Maze</font>
			</div>


		<div class="row">
			<div class="col-xs-12 col-md-8">
				<div class="item-name">Megadrive-Maze</div>
				<div class="item-keyword">
									</div>
				<div class="item-action">
					<div class="btn-group">
						<a href=/Download/dl/id/1687915660497269 target=_blank class="btn btn-primary btn-sm">去下载(<span id="down-count">0</span>)</a>
						<a href="###" class="btn btn-white btn-sm vote-up"><i class="fa fa-thumbs-up"></i> 赞(<span id="vote-up-count">3</span>) </a>
						<a href="###" class="btn btn-white btn-sm vote-down"><i class="fa fa-thumbs-down"></i> 踩(<span id="vote-down-count">0</span>) </a>
						<a href="/Download/comment/id/1687915660497269" data-toggle="modal" data-target="#myModal" class="btn btn-white btn-sm"><i class="fa fa-comment"></i> 评论(<span id="comment-count">0</span>) </a>
						<a href="###" class="btn btn-white btn-sm favor-item"><i class="fa fa-heart"></i> 收藏(<span id="favor-count">0</span>) </a>
					</div>
				</div>
				<hr>

				<div class="item-info">
					<B>所属分类</B>：游戏<BR>
					<B>开发工具</B>：C<BR>
					<B>文件大小</B>：0KB<BR>
					<B>下载次数</B>：0<BR>
					<B>上传日期</B>：2020-07-19 21:02:22<BR>
					<B>上 传 者</B>：<a href=/User/profile/id/1682139907912860.html>sh-1993</a><BR>
				</div>
				<div class="item-intro">
					说明：&nbsp;&nbsp;小型简单的世嘉Megadrive Genesis迷宫游戏，目标是与Clion一起构建。<BR>(Small and simple Sega Megadrive Genesis maze game targeted at building with Clion.)				</div>
				<hr>
				<div><B>文件列表</B>: </div>
				<div id="file-list">
				CMakeLists.<B>txt</B> (355, 2020-07-13)<BR>LICENSE (11357, 2020-07-13)<BR>depends/ (0, 2020-07-13)<BR>depends/sgdk/ (0, 2020-07-13)<BR>inc/ (0, 2020-07-13)<BR>inc/character.<B>h</B> (238, 2020-07-13)<BR>inc/joystick_handler.<B>h</B> (385, 2020-07-13)<BR>res/ (0, 2020-07-13)<BR>res/resource.<B>h</B> (117, 2020-07-13)<BR>res/resource.<B>res</B> (43, 2020-07-13)<BR>res/sprites/ (0, 2020-07-13)<BR>res/sprites/axeman.<B>bmp</B> (2102, 2020-07-13)<BR>src/ (0, 2020-07-13)<BR>src/boot/ (0, 2020-07-13)<BR>src/boot/rom_head.<B>c</B> (1820, 2020-07-13)<BR>src/boot/sega.<B>s</B> (11122, 2020-07-13)<BR>src/joystick_handler.<B>c</B> (845, 2020-07-13)<BR>src/main.<B>c</B> (661, 2020-07-13)<BR>				</div>
				<hr>
				<div id="readme">
				# Megadrive-Maze

![C CI](https://github.com/DPriceDev/Megadrive-Maze/workflows/C/C++%20CI/badge.svg)

This is a small Sega Megadrive/Genesis game project with an emphasis on running within Clion. The project is a small maze based game, hopefully with a few
monsters and weapons and such.

## Getting Started

These are the specific requirements for setting the project up with Clion as of 13th July 2020.

### Prerequisites

The main requirement for this project is Clion 2020.2 or above.

## Building

To clone this repo, use the '--recursive' flag to capture the submodule dependencies.

```
git clone --recursive https://github.com/DPriceDev/Megadrive-Maze
```

Once cloned, the project can be opened directly in Clion. There are two targets setup in the cmake "Megadrive-maze" and "dummy".
Dummy is setup to allow file discovery and is not a runnable target. The project can be built by building the Megadrive-maze cmake target.

### Building the hard way

There is a harder way to do this (my first attempt at building this before switching to cmake) by explicitly declaring make as an external tool. These instructions are here for 
posterity, as I would suggest using the Cmake project to build the project instead.

To clone this repo, use the '--recursive' flag to capture the submodule dependencies.

```
git clone --recursive https://github.com/DPriceDev/Megadrive-Maze
```

Open the repo folder in Clion. Once loaded you can begin to setup the configuration. Open the configurations dialog, 
usually shown in the top right of the IDE or from the toolbar:

```
run -> edit configurations...
```

From here you can setup the makefile configuration by going to:

```
+ (add new configuration) -> Makefile Application
name: SGDK Build
```

Now the target needs to be set, open up the custom targets panel in the settings by clicking the three dots next to the target dropdown, and 
then adding a custom target:

```
target: ... -> Settings -> Build, Excecution and deployment -> Custom Build Targets -> + (add new target)

Custom Build Target
name: SGDK Target
```

Name the target, and then for the build you are going to once again select the three dots next to the build dropdown and then
select add to add a new external tool.

```
build: ... -> external tools -> + (add external tool)
```

Once the external tool dialog appears, you are going to need to fill a few sections out, these being name, Program, arguments and working directory.
The program is going to be the make.exe that comes as part of the SGDK, the argument is the flag and path to the makefile, also from the SGDK, and the
working directory is the repo project directory.

```
name: SGDK Make
Program:            C:\...path_to_repo...\Megadrive-Maze\depends\sgdk\bin\make.exe
Arguments:          -f C:\...path_to_repo...\Megadrive-Maze\depends\sgdk\bin\makefile.gen
Working directory:  C:\...path_to_repo...\Megadrive-Maze
```

Once finished, you can create the external tool, set the custom build target as this tool, and then applying that back to the configuration tab, where it can be set as the target for the configuration. when everything
is complete and done, click create configuration (I also forget to) before closing the dialog.

```
custom build target
build: SGDK Make

configuration
name: SGDK Build
target: SGDK Target

then create configuration...
```

From here you can hit the build icon and the rom should build into the out folder.

```
out/rom.bin
```

## Deployment

Deployment is fairly easy from an emulated point of view. Once the rom has been built it can be loaded into a number of different
emulators, such as Gensk and regen. The standard gens emulator seems to have graphical issues and may not run.

The deployment can be taken further within Clion if you want it to be more automated in running the emulator. This can be done by
reopening the SGDK Build Configuration and adding the emulator parameters. In this example I am using Gensk. Simply set the executable to the
gens.exe program and set the program arguments to the path to the rom.

with external makefile tool
```
External Makefile Configuration
name: SGDK build
Target: SGDK Target
Executable: C:\..path_to_emulator..\gensk\gens.exe
Program Arguement: C:\..path_to_repo\Megadrive-Maze\out\rom.bin
```
or with cmake
```
CMake Configuration
name: Megadrive-Maze
Target: Megadrive-Maze
Executable: C:\..path_to_emulator..\gensk\gens.exe
Program Arguement: C:\..path_to_repo\Megadrive-Maze\out\rom.bin
```

Now clicking the green run arrow in the IDE will build the rom and then launch it into the emulator.

## Debugging

Debugging can be set up with the gensk emulator by connect to its GDB server with clion. Make sure you are on the debug variant of the target, 
which can be set in the configuration dropdown, and you have built "MEGADRIVE-MAZE | DEBUG" at least once.

Once you have the debug build, open the configurations, from the dropdown, or from:
```
run -> edit configurations...
```

Then create a new build configuration with Remote GDB. This configuration allows clion to connect to gensk to
allow us to debug.
```
+ (add new configuration) -> GDB Remote Debug
name: Gensk Debug
```

Finally, you can fill in the configuration with the path to the GDB debugger, located in the SGDK, and the path to the
rom.out, located in the out folder of the project.

```
CMake Configuration
name: GDB Remote Debug
GDB: C:\..path_to_emulator..\gensk\GDB.exe
'target remote' args: localhost:6868
Symbol file: C:\..path_to_repo\Megadrive-Maze\out\rom.out
```

Once created, you can run the target "MEGADRIVE-MAZE | DEBUG", and then switch to this new "GDB Remote Debug" configuration, and click
the debug button. This will connect the IDE to gensk and will allow debugging.

## Additional

The project comes with a CMakeList.txt file for compatibility with Clion; however, it does not play an active role in the build
system, and only provides IDE support for discovering includes and source files.

## Troubleshooting

If you have trouble building the Debug build, it may help to build the release first, as sometimes the debug build of sgdk doesnt create the
symbols.txt file before it is required.

## Built With

* [SGDK](https://github.com/Stephane-D/SGDK) - The Sega Genesis C Development Kit

## Authors

* **David Price** - *Initial work* - [DPriceDev](https://github.com/DPriceDev)

## License

This project is licensed under the Apache v2.0 License - see the [LICENSE.md](LICENSE.md) file for details

## Acknowledgments

* Inspired by [GameHut](https://www.youtube.com/channel/UCfVFSjHQ57zyxajhhRc7i0g)
* Thankful for 8-bit the Dungeon Tileset created by [Scut](https://scut.itch.io/7drl-tileset-2018) from itch.io
				</div>
				<hr>
				<div><B>近期下载者</B>：</div>
				<div id="download-users"></div>
				<hr>
				<div><B>相关文件</B>：</div>
				<div id="relate-items"></div>
				<hr>
				<div><B>评论</B>：[<a href=/Download/comment/id/1687915660497269.html data-toggle=modal data-target="#myModal">我要评论</a>]&nbsp;[<a class='pop-a' href=/Download/report/id/1687915660497269.html>举报此文件</a>]</div>
				<div id="file-comments"></div>
				<hr>
				<div><B>收藏者</B>：</div>
				<div id="favor-users"></div>
				<p></p>
			</div>

			<div class="col-xs-12 col-md-4">

				<div class="ad-sidebar text-center">
					<div class="ad-300">
					</div>
				</div>
			</div>
		</div>

	</div>
</div>



	<div class="my-footer">
		<div class="container">
		<div class="pull-right">
		</div>

		<div>
			
			<a href="http://www.pudn.com" target=_blank>© 联合开发网 from 2004</a> | 
			<a href="/Index/contact.html">联系站长</a> | 
			<a href=" https://beian.miit.gov.cn" target=_blank>湘ICP备2023001425号</a> | 
			<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010502000604" target=_blank>网安备43010502000604</a> | 
		</div>
		</div>
	</div>


</div><!-- /wrapper-->




<!-- page specific plugin scripts -->

<!-- inline scripts related to this page -->

<div id="myModal" class="modal fade" tabindex="-1" 
			role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			
		</div>
	</div>
</div><!-- /.modal-table -->

</body>

<script type="text/javascript">
$(document).on('click', '.list-more', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height',$('#list-'+id)[0].scrollHeight);
	$(this).removeClass('list-more');
	$(this).addClass('list-hide');
	$(this).html('<i class="fa fa-angle-double-up"></i>');
	
	//$(this).hide();

	return false;
});

$(document).on('click', '.list-hide', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height','100px');
	$(this).removeClass('list-hide');
	$(this).addClass('list-more');
	$(this).html('<i class="fa fa-angle-double-down"></i>');
	
	return false;
});

$("#myModal").on("hidden.bs.modal", function() {
    $(this).removeData();
});

$(document).on("click",".keyword",function(){
	var keyword=$(this).attr("keyword");
	var type_id=$(this).attr("type_id");
	if(typeof(type_id) =="undefined" || type_id =="") type_id="0";
	location.href="http://search.pudn.com/Download/index?keyword="+keyword;
	
	return false;
});
</script>
<script type="text/javascript" src="/js/time.js"></script>


<script type="text/javascript" src="/js/marked.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('.hide-list').each(function(){
			if ($(this)[0].offsetHeight < $(this)[0].scrollHeight){
				var id=$(this).attr('id');
				id =id.substring(5);
				$(this).after('<div style="text-align:center"><a href="" class="list-more" data-id="' + id + '"><i class="fa fa-angle-double-down"></i></a></div>');
			}
		});
	});
	var g_id="1687915660497269";
	var keywords =new Array();
		function get_download_user(){
		var url ="/Download/get_download_user/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html>'+ret[i].name+'</a> ';
			}
			$('#download-users').append(html);
		});
	}
	
	function get_relate_item(){
		var url ="/Download/get_relate_item/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			var intro;
			for(i in ret){
				intro =ret[i].intro;
				for(j in keywords){
					var reg =new RegExp(keywords[j],'gmi');
					intro =intro.replace(reg,'<font color=brown>'+keywords[j]+'</font>');
				}
				html =html + '[<a href=/Download/item/id/'+ret[i].new_id+'.html>'+ret[i].name+'</a>]&nbsp; '+intro+'<BR>';
			}
			$('#relate-items').append(html);
		});
		
	}
	function get_score_name(score){
		switch(score){
		case '100': return '很好，推荐下载';
		case '85': return '还不错';
		case '75': return '一般，勉强可用';
		case '50': return '差';
		case '3': return '纯粹是垃圾';
		case '40': return '和说明完全不符';
		case '20': return '文件不全';
		case '10': return '不是源代码或资料';
		case '5': return '文件有密码，不知道密码';
		case '0': return '不能解压或下载失败';
		}
		return '';
	}
	function get_comment(){
		var url ="/Download/get_comments/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var total_count =ret.total_count;
			var data =ret.data;
			var html='';
			for(i in data){
				html =html + '<a href="/User/profile/id/'+data[i].user_new_id+'.html" class="uploader">'+data[i].user_name+'</a>: <span class="comment-score">'+get_score_name(data[i].score)+'</span>, '+data[i].content+'<BR>';
			}
			$('#file-comments').append(html);
		});
		
	}
	function get_favor(){
		var url ="/Download/get_item_favors/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html class=user>'+ret[i].name+'</a>&nbsp;';
			}
			$('#favor-users').html(html);
		});
	}
	// 得到下载这个的用户又下载了什么
	function get_more_download(){
		
	}
	// 得到下载这个的用户又搜索了什么
	function get_more_keyword(){
		
	}
	
	// 得到论坛相关问题
	function get_bbs(){
		
	}
	
	// 得到软件工场相关内容
	function get_works(){
		
	}
	
	// 得到相关聊天室
	function get_chat(){
		
	}
	
	// 得到相关软件商城信息
	function get_shop(){
		
	}
	
	// 得到job
	
	// 得到学习内容

	// 数据
	get_download_user();
	//get_relate_item();
	get_comment();
	get_favor();
	
	$('.vote-up').click(function(){
		var url="/Download/vote/t/up/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
				if(ret.url.length >0)
					location.href=ret.url;
			}
			else{
				var s =$('#vote-up-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-up-count').html(count);
			}
		})
		return false;
	});
	$('.vote-down').click(function(){
		var url="/Download/vote/t/down/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0)
				alert(ret.info);
			else{
				var s =$('#vote-down-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-down-count').html(count);
			}
		})
		return false;
	});
	$('.favor-item').click(function(){
		var url="/Favor/add/t/0/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
			}
			else{
				var s =$('#favor-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#favor-count').html(count);
			}
		})
		return false;
	});
	$('.pop-a').click(function(){
		var url=$(this).attr('href');
		$.get(url,function(ret){
			alert(ret.info);
			//location.reload();
		})
		return false;
	});

document.getElementById('readme').innerHTML =marked.parse(document.getElementById('readme').innerHTML);
</script>



</html>