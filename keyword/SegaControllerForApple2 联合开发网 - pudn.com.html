
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SegaControllerForApple2 联合开发网 - pudn.com</title>

    <link href="/Public/m/css/bootstrap.min.css" rel="stylesheet">
    <link href="/Public/m/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/Public/m/css/animate.css" rel="stylesheet">
    <link href="/Public/m/css/style.css" rel="stylesheet">

	<link href="/Public/m/css/plugins/slick/slick.css" rel="stylesheet">
	<link href="/Public/m/css/plugins/slick/slick-theme.css" rel="stylesheet">

	

	<link href="/css/style.css" rel="stylesheet">

	<!-- Mainly scripts -->
	<script src="/Public/m/js/jquery-2.1.1.js"></script>
	<script src="/Public/m/js/bootstrap.min.js"></script>

	<script src="/Public/m/js/plugins/metisMenu/jquery.metisMenu.js"></script>
	<script src="/Public/m/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

	<!-- Custom and plugin javascript -->
	<script src="/Public/m/js/inspinia.js"></script>
	<script src="/Public/m/js/plugins/pace/pace.min.js"></script>
	
<META name="Keywords" content="SegaControllerForApple2 程序员 编程 源码 源代码 下载">

	
<META name="Description" content="SegaControllerForApple2 在Apple 2计算机上使用Sega Genesis Megadrive Gamepad，">

</head>

<body>

<!-- /.main-container start -->

<div class="pace  pace-inactive">
  	<div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  	<div class="pace-progress-inner"></div>
	</div>
	<div class="pace-activity"></div>
</div>

<div class="all-content">
	<div class="my-container top-navigation">
		<nav class="navbar navbar-static-top" role="navigation">
			<div class="navbar-header">
				<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
					<i class="fa fa-reorder"></i>
				</button>
				<a href="http://www.pudn.com" class="navbar-brand">联合开发网</a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li>
						<a href="/" style="padding-right:8px;padding-left:8px;font-size:16px">首页</a>
					</li>
					<li>
						<a href="https://search.pudn.com" style="padding-right:8px;padding-left:8px;font-size:16px">搜索</a>
					</li>
				</ul>
               	<ul class="nav navbar-top-links navbar-right">
               							<li>
                       	<a href="/User/login.html">
                           	&nbsp; <i class="fa fa-sign-out"></i>登录
                       	</a>
                   	</li>
                   	<li>
                       	<a href="/User/reg.html"><i class="fa fa-sign-out"></i>注册
                       	</a>
                   	</li>
					               	</ul>
			</div>
		</nav>
	</div>
	<form action="https://search.pudn.com/Download" method="get">
	<div class="top-menu-line2">
		<div class="my-container">
			<a href=/Download/upload.html>上传</a>
			&nbsp; <a href=/User>管理</a>
			&nbsp; <a href=https://search.pudn.com/Download>搜索</a>
			&nbsp; <a href=/Guestbook>留言</a>
			<div class="input-group pull-right" style="max-width:200px;margin:3px 15px 0px 0px">
				<input type="text" name="keyword" maxlength=20 placeholder="请输入关键字" class="form-control input-sm">
				<span class="input-group-btn"> <button type="submit" class="btn btn-white input-sm" style="border:1px solid #AAA"><i class="fa fa-search"></i></button>
				</span>
			</div>
		</div>
	</div></form>



<div class="row wrapper white-bg">
	<div class="my-container">
			<div class="nav-dir" style="padding:10px 0px">
				<a href="/">Pudn.com</a>&nbsp;&gt;&nbsp;下载中心
				&nbsp;&gt;&nbsp;其他				&nbsp;&gt;&nbsp;<font color=red>SegaControllerForApple2</font>
			</div>


		<div class="row">
			<div class="col-xs-12 col-md-8">
				<div class="item-name">SegaControllerForApple2</div>
				<div class="item-keyword">
									</div>
				<div class="item-action">
					<div class="btn-group">
						<a href=/Download/dl/id/1694704439560746 target=_blank class="btn btn-primary btn-sm">去下载(<span id="down-count">0</span>)</a>
						<a href="###" class="btn btn-white btn-sm vote-up"><i class="fa fa-thumbs-up"></i> 赞(<span id="vote-up-count">1</span>) </a>
						<a href="###" class="btn btn-white btn-sm vote-down"><i class="fa fa-thumbs-down"></i> 踩(<span id="vote-down-count">0</span>) </a>
						<a href="/Download/comment/id/1694704439560746" data-toggle="modal" data-target="#myModal" class="btn btn-white btn-sm"><i class="fa fa-comment"></i> 评论(<span id="comment-count">0</span>) </a>
						<a href="###" class="btn btn-white btn-sm favor-item"><i class="fa fa-heart"></i> 收藏(<span id="favor-count">0</span>) </a>
					</div>
				</div>
				<hr>

				<div class="item-info">
					<B>所属分类</B>：其他<BR>
					<B>开发工具</B>：C++<BR>
					<B>文件大小</B>：0KB<BR>
					<B>下载次数</B>：0<BR>
					<B>上传日期</B>：2019-11-09 08:02:01<BR>
					<B>上 传 者</B>：<a href=/User/profile/id/1682139907912860.html>sh-1993</a><BR>
				</div>
				<div class="item-intro">
					说明：&nbsp;&nbsp;在Apple 2计算机上使用Sega Genesis Megadrive Gamepad，<BR>(Use a Sega Genesis Megadrive Gamepad with your Apple 2 Computer,)				</div>
				<hr>
				<div><B>文件列表</B>: </div>
				<div id="file-list">
				images/ (0, 2019-11-09)<BR>images/ComputerInspector.<B>jpg</B> (74741, 2019-11-09)<BR>images/board.<B>jpg</B> (98801, 2019-11-09)<BR>images/pcb.<B>jpg</B> (141886, 2019-11-09)<BR>pcb/ (0, 2019-11-09)<BR>pcb/gerber/ (0, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-B_Cu.<B>gbr</B> (100233, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-B_Mask.<B>gbr</B> (106748, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-B_SilkS.<B>gbr</B> (52276, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-Edge_Cuts.<B>gbr</B> (927, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-F_Cu.<B>gbr</B> (128329, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-F_Mask.<B>gbr</B> (106748, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-F_SilkS.<B>gbr</B> (61792, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-NPTH.<B>drl</B> (285, 2019-11-09)<BR>pcb/gerber/SegaControllerForApple2-PTH.<B>drl</B> (2118, 2019-11-09)<BR>pcb/images/ (0, 2019-11-09)<BR>pcb/images/parts_c1_edge.<B>jpg</B> (21202, 2019-11-09)<BR>pcb/images/parts_oled.<B>jpg</B> (184035, 2019-11-09)<BR>pcb/images/parts_piezo.<B>jpg</B> (110685, 2019-11-09)<BR>pcb/images/pcb_1.2_bottom.<B>png</B> (48032, 2019-11-09)<BR>pcb/images/pcb_1.2_top.<B>png</B> (56228, 2019-11-09)<BR>pcb/images/pcb_assembled.<B>jpg</B> (367348, 2019-11-09)<BR>pcb/images/pcb_assembled_withoutoled.<B>jpg</B> (276044, 2019-11-09)<BR>pcb/kicad/ (0, 2019-11-09)<BR>pcb/kicad/SegaControllerForApple2.<B>kicad_pcb</B> (190616, 2019-11-09)<BR>pcb/kicad/SegaControllerForApple2.<B>pro</B> (688, 2019-11-09)<BR>pcb/kicad/SegaControllerForApple2.<B>sch</B> (12101, 2019-11-09)<BR>source/ (0, 2019-11-09)<BR>source/SegaControllerForApple2.<B>ino</B> (29771, 2019-11-09)<BR>				</div>
				<hr>
				<div id="readme">
				# SegaControllerForApple2
<img align="right" src="images/pcb.jpg">

Use a Sega Genesis/Megadrive Gamepad with your Apple 2 Computer

This repo contains the PCB details and Arduino code to be able to connect a 3 or 6 button Sega Genesis or Megadrive Gamepad to an Apple 2 Computer which utilises and Arduino Nano v3 and uses Sega Controller code by [Jon Thysell](https://github.com/jonthysell/SegaController) 

[PCB Details including Bill of Materials](pcb)

[Arduino Source Code](source)

## Theory of Operation
Apple 2 computers use two RC timer circuits to determine the position of each joystick axis. The capacitors are within the Apple 2 itself, while the resistors are variable potentiometers within the joystick.  Apple 2 computers expect the joystick to have two 150KOhm pots for X (0 = Left, 150K = Right) and Y (0 = Up, 150K = Down)

This board uses two daisy-chained MCP42100s as a means to create a 200K pot for X and Y (software limit this to 150K +/- any calibration offsets).  As this is an analog circuit, characteristics of the circuitry probably has been changed since the Apple 2 came from the factory, meaning that it is generally necessary to include an offset to wanted values for proper centering (similar to the trimmer capability on original Apple analog sticks) 

The Arduino reads the Sega Gamepad and sets the pot values to simulate analog behavior depending on the emulated joystick mode and previous states (there is a digital mode two analog styles and a hybrid mode which are selectable by clicking the Sega Controller Start Button)

Transistors are uses as switches by the arduino to trigger firebutton 0 and 1 (the method used is based on the [diagram](http://apple2.org.za/gswv/a2zine/faqs/R030PCA2RF.GIF) which was originally posted at in the official Csa2 (comp.sys.apple2) Usenet newsgroup Apple II FAQs)

If installed, the OLED provides visual feedback into the joystick operational mode and indication as to the joystick fire button and analog pot positions.

Audible feedback is also provided through the Piezo Buzzer which can be helpful when executing changes in the middle of a game.

### Gamepad Button Functions

|Button              | Game Pad Mode  | When C is Held Down |
| ------------ | ------------ |------------ |
| A | Firebutton 0 | Firebutton 0 Auto Fire Toggle | 
| B | Firebutton 1 | Firebutton 1 Auto Fire Toggle |
| C | Return Joystick Axes to Centre | |
| Start | Cycle Gamepad modes (Digital, Analog1, Analog2, Hybrid) | Enter Calibration Mode|
| X | Not Used |  |
| Y | Not Used |  |
| Z | Not Used |  |
| Mode | Not Used |  |

#### Notes:
Holding A/B/C together to swap Firebutton 0 and Firebutton 1

While Analog1, Analog2 and Hybrid do not re-centre when the Dpad buttons are released, pressing button C will recentre the stick.


## Calibration Mode

holding <strong>C</strong> and pressing <strong>Start</strong> on the controller will enable calibration mode.

Using the Dpad, the centre offset can be adjusted as necessary. Pressing <strong>Start</strong> will save the calibration offsets into the Arduino EEPROM and return to normal joystick mode

[ComputerInspector (MECC 1.0)](https://ftp.apple.asimov.net/images/disk_utils/diagnostics/ComputerInspector%20%28MECC%201.0%29.dsk) located on Asimov has a joystick test program which is useful to check joystick operation and to calibrate the joystick centre

<img src="images/ComputerInspector.jpg">


If you are unable to download and install the image, the short Applesoft basic program below can be used to verify the board and code is working as expected and to support calibration efforts (when centred, the computer should be reporting X=128, Y=128)

###  Basic Joystick Test program from comp.sys.apple2 Apple II FAQ:
```
20 PRINT "X= "; PDL(0); TAB(15); "Y= ";PDL(1); TAB(30);
30 IF PEEK(49249)>127 THEN PRINT "  B0";
40 IF PEEK(49250)>127 THEN PRINT "  B1";
50 PRINT: GOTO 20
```				</div>
				<hr>
				<div><B>近期下载者</B>：</div>
				<div id="download-users"></div>
				<hr>
				<div><B>相关文件</B>：</div>
				<div id="relate-items"></div>
				<hr>
				<div><B>评论</B>：[<a href=/Download/comment/id/1694704439560746.html data-toggle=modal data-target="#myModal">我要评论</a>]&nbsp;[<a class='pop-a' href=/Download/report/id/1694704439560746.html>举报此文件</a>]</div>
				<div id="file-comments"></div>
				<hr>
				<div><B>收藏者</B>：</div>
				<div id="favor-users"></div>
				<p></p>
			</div>

			<div class="col-xs-12 col-md-4">

				<div class="ad-sidebar text-center">
					<div class="ad-300">
					</div>
				</div>
			</div>
		</div>

	</div>
</div>



	<div class="my-footer">
		<div class="container">
		<div class="pull-right">
		</div>

		<div>
			
			<a href="http://www.pudn.com" target=_blank>© 联合开发网 from 2004</a> | 
			<a href="/Index/contact.html">联系站长</a> | 
			<a href=" https://beian.miit.gov.cn" target=_blank>湘ICP备2023001425号</a> | 
			<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010502000604" target=_blank>网安备43010502000604</a> | 
		</div>
		</div>
	</div>


</div><!-- /wrapper-->




<!-- page specific plugin scripts -->

<!-- inline scripts related to this page -->

<div id="myModal" class="modal fade" tabindex="-1" 
			role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			
		</div>
	</div>
</div><!-- /.modal-table -->

</body>

<script type="text/javascript">
$(document).on('click', '.list-more', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height',$('#list-'+id)[0].scrollHeight);
	$(this).removeClass('list-more');
	$(this).addClass('list-hide');
	$(this).html('<i class="fa fa-angle-double-up"></i>');
	
	//$(this).hide();

	return false;
});

$(document).on('click', '.list-hide', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height','100px');
	$(this).removeClass('list-hide');
	$(this).addClass('list-more');
	$(this).html('<i class="fa fa-angle-double-down"></i>');
	
	return false;
});

$("#myModal").on("hidden.bs.modal", function() {
    $(this).removeData();
});

$(document).on("click",".keyword",function(){
	var keyword=$(this).attr("keyword");
	var type_id=$(this).attr("type_id");
	if(typeof(type_id) =="undefined" || type_id =="") type_id="0";
	location.href="http://search.pudn.com/Download/index?keyword="+keyword;
	
	return false;
});
</script>
<script type="text/javascript" src="/js/time.js"></script>


<script type="text/javascript" src="/js/marked.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('.hide-list').each(function(){
			if ($(this)[0].offsetHeight < $(this)[0].scrollHeight){
				var id=$(this).attr('id');
				id =id.substring(5);
				$(this).after('<div style="text-align:center"><a href="" class="list-more" data-id="' + id + '"><i class="fa fa-angle-double-down"></i></a></div>');
			}
		});
	});
	var g_id="1694704439560746";
	var keywords =new Array();
		function get_download_user(){
		var url ="/Download/get_download_user/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html>'+ret[i].name+'</a> ';
			}
			$('#download-users').append(html);
		});
	}
	
	function get_relate_item(){
		var url ="/Download/get_relate_item/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			var intro;
			for(i in ret){
				intro =ret[i].intro;
				for(j in keywords){
					var reg =new RegExp(keywords[j],'gmi');
					intro =intro.replace(reg,'<font color=brown>'+keywords[j]+'</font>');
				}
				html =html + '[<a href=/Download/item/id/'+ret[i].new_id+'.html>'+ret[i].name+'</a>]&nbsp; '+intro+'<BR>';
			}
			$('#relate-items').append(html);
		});
		
	}
	function get_score_name(score){
		switch(score){
		case '100': return '很好，推荐下载';
		case '85': return '还不错';
		case '75': return '一般，勉强可用';
		case '50': return '差';
		case '3': return '纯粹是垃圾';
		case '40': return '和说明完全不符';
		case '20': return '文件不全';
		case '10': return '不是源代码或资料';
		case '5': return '文件有密码，不知道密码';
		case '0': return '不能解压或下载失败';
		}
		return '';
	}
	function get_comment(){
		var url ="/Download/get_comments/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var total_count =ret.total_count;
			var data =ret.data;
			var html='';
			for(i in data){
				html =html + '<a href="/User/profile/id/'+data[i].user_new_id+'.html" class="uploader">'+data[i].user_name+'</a>: <span class="comment-score">'+get_score_name(data[i].score)+'</span>, '+data[i].content+'<BR>';
			}
			$('#file-comments').append(html);
		});
		
	}
	function get_favor(){
		var url ="/Download/get_item_favors/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html class=user>'+ret[i].name+'</a>&nbsp;';
			}
			$('#favor-users').html(html);
		});
	}
	// 得到下载这个的用户又下载了什么
	function get_more_download(){
		
	}
	// 得到下载这个的用户又搜索了什么
	function get_more_keyword(){
		
	}
	
	// 得到论坛相关问题
	function get_bbs(){
		
	}
	
	// 得到软件工场相关内容
	function get_works(){
		
	}
	
	// 得到相关聊天室
	function get_chat(){
		
	}
	
	// 得到相关软件商城信息
	function get_shop(){
		
	}
	
	// 得到job
	
	// 得到学习内容

	// 数据
	get_download_user();
	//get_relate_item();
	get_comment();
	get_favor();
	
	$('.vote-up').click(function(){
		var url="/Download/vote/t/up/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
				if(ret.url.length >0)
					location.href=ret.url;
			}
			else{
				var s =$('#vote-up-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-up-count').html(count);
			}
		})
		return false;
	});
	$('.vote-down').click(function(){
		var url="/Download/vote/t/down/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0)
				alert(ret.info);
			else{
				var s =$('#vote-down-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-down-count').html(count);
			}
		})
		return false;
	});
	$('.favor-item').click(function(){
		var url="/Favor/add/t/0/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
			}
			else{
				var s =$('#favor-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#favor-count').html(count);
			}
		})
		return false;
	});
	$('.pop-a').click(function(){
		var url=$(this).attr('href');
		$.get(url,function(ret){
			alert(ret.info);
			//location.reload();
		})
		return false;
	});

document.getElementById('readme').innerHTML =marked.parse(document.getElementById('readme').innerHTML);
</script>



</html>