
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>genesis 联合开发网 - pudn.com</title>

    <link href="/Public/m/css/bootstrap.min.css" rel="stylesheet">
    <link href="/Public/m/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/Public/m/css/animate.css" rel="stylesheet">
    <link href="/Public/m/css/style.css" rel="stylesheet">

	<link href="/Public/m/css/plugins/slick/slick.css" rel="stylesheet">
	<link href="/Public/m/css/plugins/slick/slick-theme.css" rel="stylesheet">

	

	<link href="/css/style.css" rel="stylesheet">

	<!-- Mainly scripts -->
	<script src="/Public/m/js/jquery-2.1.1.js"></script>
	<script src="/Public/m/js/bootstrap.min.js"></script>

	<script src="/Public/m/js/plugins/metisMenu/jquery.metisMenu.js"></script>
	<script src="/Public/m/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

	<!-- Custom and plugin javascript -->
	<script src="/Public/m/js/inspinia.js"></script>
	<script src="/Public/m/js/plugins/pace/pace.min.js"></script>
	
<META name="Keywords" content="genesis atomone 程序员 编程 源码 源代码 下载">

	
<META name="Description" content="genesis 起源宣言">

</head>

<body>

<!-- /.main-container start -->

<div class="pace  pace-inactive">
  	<div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  	<div class="pace-progress-inner"></div>
	</div>
	<div class="pace-activity"></div>
</div>

<div class="all-content">
	<div class="my-container top-navigation">
		<nav class="navbar navbar-static-top" role="navigation">
			<div class="navbar-header">
				<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
					<i class="fa fa-reorder"></i>
				</button>
				<a href="http://www.pudn.com" class="navbar-brand">联合开发网</a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li>
						<a href="/" style="padding-right:8px;padding-left:8px;font-size:16px">首页</a>
					</li>
					<li>
						<a href="https://search.pudn.com" style="padding-right:8px;padding-left:8px;font-size:16px">搜索</a>
					</li>
				</ul>
               	<ul class="nav navbar-top-links navbar-right">
               							<li>
                       	<a href="/User/login.html">
                           	&nbsp; <i class="fa fa-sign-out"></i>登录
                       	</a>
                   	</li>
                   	<li>
                       	<a href="/User/reg.html"><i class="fa fa-sign-out"></i>注册
                       	</a>
                   	</li>
					               	</ul>
			</div>
		</nav>
	</div>
	<form action="https://search.pudn.com/Download" method="get">
	<div class="top-menu-line2">
		<div class="my-container">
			<a href=/Download/upload.html>上传</a>
			&nbsp; <a href=/User>管理</a>
			&nbsp; <a href=https://search.pudn.com/Download>搜索</a>
			&nbsp; <a href=/Guestbook>留言</a>
			<div class="input-group pull-right" style="max-width:200px;margin:3px 15px 0px 0px">
				<input type="text" name="keyword" maxlength=20 placeholder="请输入关键字" class="form-control input-sm">
				<span class="input-group-btn"> <button type="submit" class="btn btn-white input-sm" style="border:1px solid #AAA"><i class="fa fa-search"></i></button>
				</span>
			</div>
		</div>
	</div></form>



<div class="row wrapper white-bg">
	<div class="my-container">
			<div class="nav-dir" style="padding:10px 0px">
				<a href="/">Pudn.com</a>&nbsp;&gt;&nbsp;下载中心
				&nbsp;&gt;&nbsp;hotest				&nbsp;&gt;&nbsp;<font color=red>genesis</font>
			</div>


		<div class="row">
			<div class="col-xs-12 col-md-8">
				<div class="item-name">genesis</div>
				<div class="item-keyword">
					<a href="#" class="keyword" keyword="atomone">atomone</a>&nbsp;				</div>
				<div class="item-action">
					<div class="btn-group">
						<a href=/Download/dl/id/1701258135909523 target=_blank class="btn btn-primary btn-sm">去下载(<span id="down-count">0</span>)</a>
						<a href="###" class="btn btn-white btn-sm vote-up"><i class="fa fa-thumbs-up"></i> 赞(<span id="vote-up-count">36</span>) </a>
						<a href="###" class="btn btn-white btn-sm vote-down"><i class="fa fa-thumbs-down"></i> 踩(<span id="vote-down-count">0</span>) </a>
						<a href="/Download/comment/id/1701258135909523" data-toggle="modal" data-target="#myModal" class="btn btn-white btn-sm"><i class="fa fa-comment"></i> 评论(<span id="comment-count">0</span>) </a>
						<a href="###" class="btn btn-white btn-sm favor-item"><i class="fa fa-heart"></i> 收藏(<span id="favor-count">0</span>) </a>
					</div>
				</div>
				<hr>

				<div class="item-info">
					<B>所属分类</B>：hotest<BR>
					<B>开发工具</B>：Others<BR>
					<B>文件大小</B>：0KB<BR>
					<B>下载次数</B>：0<BR>
					<B>上传日期</B>：2023-11-28 20:15:00<BR>
					<B>上 传 者</B>：<a href=/User/profile/id/1682139907912860.html>sh-1993</a><BR>
				</div>
				<div class="item-intro">
					说明：&nbsp;&nbsp;起源宣言<BR>(declaration of genesis)				</div>
				<hr>
				<div><B>文件列表</B>: </div>
				<div id="file-list">
				COMPENDIUM.<B>md</B> (22082, 2023-12-17)<BR>CONSTITUTION.<B>md</B> (25564, 2023-12-17)<BR>DECENTRALISTS.<B>md</B> (7099, 2023-12-17)<BR>FORKING.<B>md</B> (3713, 2023-12-17)<BR>GOVERNANCE.<B>md</B> (9024, 2023-12-17)<BR>LICENSE.<B>md</B> (71309, 2023-12-17)<BR>STAKING_VS_MONEY.es.<B>md</B> (23636, 2023-12-17)<BR>STAKING_VS_MONEY.fr.<B>md</B> (23594, 2023-12-17)<BR>STAKING_VS_MONEY.it.<B>md</B> (23531, 2023-12-17)<BR>STAKING_VS_MONEY.<B>md</B> (20626, 2023-12-17)<BR>resources/ (0, 2023-12-17)<BR>resources/stakingrate.<B>png</B> (275998, 2023-12-17)<BR>snapshots/ (0, 2023-12-17)<BR>				</div>
				<hr>
				<div id="readme">
				_This document is a work in progress, please make PRs_ _What matters at this
very moment is that we open ISSUEs and begin discussions about every facet that
should go in the founding documents_

_ALL CONTRIBUTIONS TO THIS REPO, ITS ISSUES, PROJECTS, AND DISCUSSIONS MAY BE USED
IN ANY EXPLICIT GITHUB FORK WITH A NEW AND DISTINCT NAME TO LAUNCH ANY FORK OR SPLIT
THAT MODIFIES ANY OF THE IDEAS MENTIONED HERE UNDER THE GnoNGPL COPYLEFT LICENSE._

----------------------------------------
# Preamble

The Cosmos community, at a crossroads, confronts divergent views on key aspects
such as mission, tokenomics, and security philosophy. AtomOne emerges as a
beacon, offering an alternative fork to navigate these waters, equipped to
handle contingencies and embodying a bastion for diverse political thought.

----------------------------------------
# Declaration of Genesis

There comes a time when there is enough disagreement among community members
and stakers about key concerns regarding the business of their chain, such as
its vision, mission, tokenomics, architecture, implementation, or philosophy;
that it makes the most sense to support an alternative fork running alongside
the original so as to be prepared against all contingencies.

Recent times have seen the Cosmos community grappling with significant
challenges stemming from differences about core tokenomics, about the very
nature of the $ATOM token (whether it is staking or monetary), about
monetization strategy and what types of projects to fund; and there generally
appears to be a great cultural chasm that shows no sign of closing about our
role and responsibilities as compared to our profit interests.

Proposal #848 ("halvening") succeeded in getting the required threshold of 50%
to pass on Gaia, but a significant portion voted NO or NWV which means that
that $ATOM stakers are largely split on the most fundamental tokenomics
security design element. 73,165,203ATOM YES vs 56,667,011ATOM NO +
11,669,549ATOM NWV overall YES:NO is 1.07:1. Furthermore, this change was
proposed on chain without addressing the valid security concerns raised by the
community, with huge errors about the cost of inflation by miscalculating true
income, and without a complete halvening schedule, thereby working to undermine
hub credibility.

These and prior disagreements have now made clear the need for an alternative
hub with a renewed focus and Alignment to serve as the canonical minimal
IBC/ICS token hub with respect to Cosmos to champion the ideals of sovereignty,
security, and decentralization everywhere; and secondarily to serve as the main
base for a political party and more-intelligent voting bloc with respect to
Gaia to save Gaia from itself. A modification to the distribution of $ATONE
through slashing those who voted in favor of #848 would help ensure that the
resultant distribution is more intelligent about security and would make us
anti-fragile against even the most powerful of adversaries.

----------------------------------------
# Vision and Missions

The vision behind this AtomOne fork is to be an alternative minimal fork of
Gaia ("cosmoshub4") running alongside Gaia to prepare for all contingencies,
and also to operate as a political party base in relation to Gaia. We strive to
complement the broader Cosmos ecosystem while introducing innovative solutions
and perspectives. Our goals are not just to resolve current challenges but are
also to set a new precedent for adaptive and responsive self-organization in
the multichain multitoken universe that we call the Cosmos.

AtomOne will lead the development and praxis of giving representation to every
(sub)group (such as a political party), each defined and strengthened by their
own living constitutions that state their values, missions, philosophies and so
on. This will foster a more diverse ecosystem of specialized zones in
coopetition (cooperation and competition) with each other despite
irreconcilable differences. AtomOne will be a base for many more partyhubs,
and itself function as a partyhub in relation to Gaia. There will be many
partyhubs in a great sea of divisions, and from this soup will emerge
specialization, interoperation through common protocols, and fault tolerance in
numbers, we pray for the helping hand of reason, wisdom, foresight, empathy,
temperance, and all other necessary faculties.

## Role as Minimal IBC/ICS Hub

While AtomOne aims to steer Gaia toward safe decisions, it cannot by itself
determine the decisions made by the Cosmos Hub. Yet, Cosmos *needs* minimal
IBC/ICS hubs without any confusion about what it is, and as mentioned in the
Declaration of Genesis Gaia does not embody this (yet). Ergo, AtomOne must not
only guide Gaia, but it must also run the desired alternative minimal IBC/ICS
hub as an alternative in addition to Gaia.

AtomOne re-commits to the original vision and primary mission of Gaia to serve
as a minimal IBC/ICS hub secured by a staking token that targets 2/3 of the
stake to be bonded. We believe that minimizing the risk profile is necessary as
an existential issue for the hub, and an issue of financial security of the
highest order for not just the hub but its hosted shards and IBC connected
network allowing AtomOne to occupy a real and an important niche. When there
is a double-spend attack on the hub, the staking tokens of those responsible
for the attack should be used to compensate the victims as much as reasonable,
and the non-zero remainder of the penalty burned. A staking token of an
exchange zone for example must consequently have additional risks related to
its business, and so $ATONE occupies a niche of minimal risk profile in
comparison.

IBC/ICS hubs should in general remain conservative in its function and offer
utility through dependability and scaling. Any experiments that change the
nature of the hub belong in new forks or splits, and an ideal hub enables them
despite of and in order to celebrate these differences. In the Cosmos there is
no need for contention as with land-locked states because there is no
limitation of finite land. We can create new forks/splits/groups that are
better aligned with what we need if there is enough need or support for it.

The powers not delegated to the AtomOne hub by the Constitution, nor prohibited
by it to the consumer chains, are reserved to the consumer chains respectively,
or to the stakers, token holders, and people; or to other splits or forks of
the AtomOne hub.

## Significance as a Political Base 

There are many of stakers and users of Gaia that are aligned with the
values, principles, original mission of Gaia and those of AtomOne, but we have
no explicit base of operations. In contrast, the informal opposition majority
party (which came about first) is well organized in comparison, usually behind
closed doors. Meanwhile "liquid staking" providers are providing a service that
does more than liquid staking, but have their own governance and powers and
thus act as a kind of political base. For example, which validators to stake to
is determined through governance in Informal/Stride.

By modifying the distribution of staking token holders for AtomOne to be more
aligned with hub security based on voting activity we can make the $ATONE
distribution a more intelligent distribution than all other alternatives (until
another split is needed due to corruption). As the project grows, by virtue of
its growth the distribution will naturally evolve (or by default, devolve), so
this may precipitate the need for more hubs descendant from AtomOne, with or
without substantial changes to its fork of the constitution. Even with the same
constitution its distribution (or how it was modified from the parent
distribution) affords its character or flavor which can strengthen or weaken
over time depending on its tokenomics. 

By our own governance function and the tooling that we fund and create, we will
bring more intelligence and security to all connected blockchains especially
Gaia. AtomOne must do whatever is necessary within reason to guide Gaia to
maintain safety, and the best way to do that is by holding $ATOMs through IBC
pegging and using these $ATOMs to make voting decisions on Cosmos as a voting
bloc. The following section describes the one and only way the AtomOne hub will
use $ATOMs; by offering what is misleadingly referred to as "liquid staking".

## Role as $ATOM "Liquid Staking" Provider

XXX Try to make this work with one $phATOM using bonding curves within bounds
with all three tokens. This would still rely on imperfect measures like present
AMM rate and can lead to manipulation and losses, but you can still maybe
restrict these losses by restricting the bounds, say to 2:1 1:2. 

AtomOne will offer an $ATOM bonding zone in a core shard to compete with
collective "liquid staking" service providers. These $ATOMs will be
automatically delegated via ICA (interchain accounts) to aligned validators as
determined by the the system determined by the $ATONE stakers. The bonders of
$ATOM toward this service will receive liquid $phATOM tokens.

In addition to Gaia's $ATOM, AtomOne's $ATONE tokens will also be bondable to
$phATONE tokens. So there will be $phATOM along side $phATONE tokens, but with
some differences in tokenomics between them. We have more control over $phATONE
tokenomics, though the changes we introduce for $phATONE may be upstreamed to
Gaia for $phATOM.

In return for delegating voting decisions from $ATOM bonded $phATOM holders to
$ATONE stakers, the AtomHub will offer the $phATOM holders the opportunity for
all perpetuity, the merger of $phATOM to $phATONE according to a reasonable
exchange ratio as determined by the best available means as determined by
$ATONE stakers, with a minimum conversion penalty of 20% and no more favorable
to $phATOM than 1:2 by total market cap between $phATOM and $phATONE. For
clarity this means that upon the failure of Gaia the $phATOM token holders can
dilute the $phATONE holders such that $phATONE holders have as low as 2/3 the
underlying $ATONE as before the merge (but no less).

The conversion penalty may decrease below 20% for $phATOM to $phATONE merger
with a Supermajority of $ATONE stakers.

AtomOne with a Constitutional Majority may decrease the merger ratio cap from
1:2 (1/3) even down to zero (e.g. to terminate the support of $phATOM) but the
execution must be delayed for a period of at least 3 months to allow $phATOM
holders to preempt this with a merge. Nothing outside of the merge will prevent
$phATOM holders from being able to redeem their due pro-rata $ATOM tokens for
all time.

Should the $phATOM be discontinued in support as decided by AtomOne with a
Constitution Majority (which is NOT signified by a merger ratio cap of 0 by
itself but must be a separate proposal), the $phATOM holders must be made whole
by redistributing the underlying $ATOM tokens to their respective $phATOM
holders completely with the same exchange factors applied to everyone equally,
but as with decreasing the merger ratio cap, (for the purpose of giving
precedent to the $phATOM -> $phATONE merge mechanism) this must be delayed by
a period of 3 months to allow $phATOM holders to preempt this with a merge.

Any slashings of the underlying $ATOM, or theft, or loss of $ATOM due to the
actions of the AtomOne hub and its $ATONE stakers are completely at the risk of
the original $ATOM holder who brought it into AtomOne. AtomOne must compensate
users within reason, but what is reasonable is up to the $ATONE stakers to
decide through AtomOne governance. Everybody must acknowledge the risks of this
experiment.

All other parameters defined here regarding the merger that may negatively
affect $phATOM holders and $ATOM holders on AtomOne cannot change even with a
Constitutional Majority.

In the case of Gaia failure this could be seen as a detriment to $phATONE
holders because their underlying $ATONE claims from $phATONE has seemingly
shrunk by up to half; but if the $ATOM token were to recover it would now be of
benefit to $phATONE holders; and this is an agreement that was pre-established
in these Founding Documents to support the mutual success of $phATOM and
$phATONEto ensure mutual success rather than sabotage. While in the end the
$ATONE stakers and before that the validators have complete freedom of will,
how well they adhere to these founding agreements is left to everyone to
enforce, such as by blacklisting or slashing staking tokens and validators held
by violators. XXX specify the conversion rate before and after the merger both ways.

There is no merge mechanism for the opposing case upon AtomOne failure. In this
case the $ATOM underlying $phATOM must be distributed back to the $phATOM
holders in proportion, or if there was already a merger, to the $phATONE
holders in proportion.

## Expected Outcomes and Benefits 

We believe that by embracing diversity and fostering open dialogue between
competing self-aligned groups we can create a more robust, innovative, and
decentralized ecosystem. The diversity of specialized self-organized groups and
forks (composed of aligned members) will accelerate innovation and
implementation through parallelism. The diversity of competitive groups and
forks will reduce risk at the local and global levels; at the local level
through competition of implementations, and at the global level through the
diversity of hubs and frameworks.

We hope that the economic recovery measures between $phATOM and $phATONE will
incentivize mutual success and allow Gaia to transition safely into a more
experimental hub as compared to the more immutable and conservative AtomOne.

----------------------------------------
# Terms

* Alignment: full agreement with the founding documents in speech and action
  with relation to AtomOne.
* AtomOne: an opinionated fork of the Cosmos hub Gaia with chainid
  "cosmoshub4". It is a minimal IBC-token-pegging and ICS hosting hub.
* Constitutional Majority: a consensus threshold set at a higher bar than the
  standard two-thirds majority initially set at 90%.
* IBC: short for Inter-Blockchain Communication, is a protocol that enables
  communication between different blockchain networks using Byzantine Fault
  Tolerant (BFT) light client proofs. It allows for the transfer of assets and
  information across independent blockchains, fostering interoperability and
  flexibility in the blockchain ecosystem. IBC is a cornerstone of the Cosmos
  network's architecture, enabling its vision of an 'Internet of Blockchains'.
* ICS: short for Inter-blockChain Security, is a mechanism for running multiple
  shard chains under the same validator set. ICS1.5 is an upgrade to ICS1 that
  improves inter-shard communication efficiency. ICS1 and ICS1.5 help scale the
  core functionality of AtomOne as well as offer anyone the service of running
  "consumer chains" for any purpose (within the guidelines set forth by
  AtomOne) secured and hosted by the same validator set as the AtomOne hub root
  and core shards.
* Zone: an independent or ICS hosted chain (or a dapp hosted on a smart
  contract chain or an instance on a parent chain) with a well-defined
  governing body or bodies that dictate the governance and economic rules
  internal to that zone. A zone is sovereign or partially sovereign.
* Fork: an exact copy of a distribution with either the same or different
  blockchain software, usually with a different chain identifier than the
  original.
* Air-drop: like a fork but with modifications to the distribution such as by
  including a new premine, or excluding addresses (such as those on sanctions
  lists), or changing the number of tokens for an address in any way, or even
  including modified or unmodified distributions of other chains.
* Split: an air-drop of a chain that modifies the distribution based on staker
  voting activity in both consensus and governance through their cryptographic
  signatures as well as any other criteria based on a well defined and
  prominent self-reinforcing constitution; or a fork of a chain with a modified
  constitution or modified software that is intended to achieve the same.
* $ATONE: the primary staking token for AtomOne. Previously known as $ATOM1.
* $phATONE: the liquid staking token for AtomOne. Previously known as $phATOM1.
* $PHOTON: currently refers to $phATONE. the latest in fee token design, a more
  deflationary alternative to $ATOM, by popular demad.

----------------------------------------
# Objectives

All users and members must agree with these objectives, and at all times when
contributing take all appropriate actions to meet these objectives both in the
AtomOne software as well as open hardware. Otherwise they are at risk of
judgement by AtomOne or any other community or governing set.

These objectives can only be changed through Constitutional Majority.

## 1. Define $ATONE

The $ATONE is defined to be a staking token of a minimal ICS1.5 IBC AtomOne Hub
that keeps 2/3 of $ATONEs staked at all times.

All forks that lose consensus continuity must change their token ticker symbol
to be distinct from $ATONE ($ATOM2 is ok). If there are competing chains with
comparably similar continuity, then the fork that has a higher market cap (as
measured after both tokens have discovered fair market value with sufficient
liquidity for at least one week) should retain the name while other forks
change their token ticker symbol.

Any changes to the distribution besides slashing for pre-established slashing
conditions such as any additional premines (besides those in the original first
genesis) disqualify the fork from retaining the same token ticker symbol; those
are new airdrops of a different token. No additional premines besides those
already defined in this planning document are allowed for any forks whose token
shall be called $ATONE.

## 2. IBC/ICS Hub and Minimalism

We are not concerned about any business plan or tokenomics strategy for the
AtomOne hub besides offering the scaling of transaction throughput through
ICS1.5. We anticipate that our approach will successfully and sufficiently
capture the niche market need for utmost security in IBC token transactions and
ICS1.5 shard hosting, and serve as the basis for all the functionality that all
people will need and want; and if it cannot be done through the spirit of these
Founding Documents and the living AtomOne Constitution then it shall be done in
the next generation that splits or forks from this AtomOne hub.

The term "minimal" refers not to the totality of functionality offered by all
the consumer chains hosted by ICS1.5, but rather the design of the root hub,
and core shards of the AtomOne hub, the tokenomics of hub, its business plan,
and its responsibilities; sometimes confusingly referred to as simply "the
hub". A "minimal hub" should be understood in this context; smart contract
systems and VMs must not be on the hub's root chain (for security and
efficiency) and ideally not even in core shards (for security), but rather on
consumer shard chains on ICS1.5. 

This is the best way to scale to billions of users while providing
specialization and isolation. For example, your home internet WIFI network is
provided by a minimal router hardware, while your backup harddrives and your
many devices are separate machines that only connect to the router. If the
router had to also host application logic, the network performance of all the
devices would suffer and the router would be more likely to crash.

All shards (chains) are secured by the same validator set as the main hub
chain. The shards that are owned and governed by AtomOne itself are c ... ...				</div>
				<hr>
				<div><B>近期下载者</B>：</div>
				<div id="download-users"></div>
				<hr>
				<div><B>相关文件</B>：</div>
				<div id="relate-items"></div>
				<hr>
				<div><B>评论</B>：[<a href=/Download/comment/id/1701258135909523.html data-toggle=modal data-target="#myModal">我要评论</a>]&nbsp;[<a class='pop-a' href=/Download/report/id/1701258135909523.html>举报此文件</a>]</div>
				<div id="file-comments"></div>
				<hr>
				<div><B>收藏者</B>：</div>
				<div id="favor-users"></div>
				<p></p>
			</div>

			<div class="col-xs-12 col-md-4">

				<div class="ad-sidebar text-center">
					<div class="ad-300">
					</div>
				</div>
			</div>
		</div>

	</div>
</div>



	<div class="my-footer">
		<div class="container">
		<div class="pull-right">
		</div>

		<div>
			
			<a href="http://www.pudn.com" target=_blank>© 联合开发网 from 2004</a> | 
			<a href="/Index/contact.html">联系站长</a> | 
			<a href=" https://beian.miit.gov.cn" target=_blank>湘ICP备2023001425号</a> | 
			<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010502000604" target=_blank>网安备43010502000604</a> | 
		</div>
		</div>
	</div>


</div><!-- /wrapper-->




<!-- page specific plugin scripts -->

<!-- inline scripts related to this page -->

<div id="myModal" class="modal fade" tabindex="-1" 
			role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			
		</div>
	</div>
</div><!-- /.modal-table -->

</body>

<script type="text/javascript">
$(document).on('click', '.list-more', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height',$('#list-'+id)[0].scrollHeight);
	$(this).removeClass('list-more');
	$(this).addClass('list-hide');
	$(this).html('<i class="fa fa-angle-double-up"></i>');
	
	//$(this).hide();

	return false;
});

$(document).on('click', '.list-hide', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height','100px');
	$(this).removeClass('list-hide');
	$(this).addClass('list-more');
	$(this).html('<i class="fa fa-angle-double-down"></i>');
	
	return false;
});

$("#myModal").on("hidden.bs.modal", function() {
    $(this).removeData();
});

$(document).on("click",".keyword",function(){
	var keyword=$(this).attr("keyword");
	var type_id=$(this).attr("type_id");
	if(typeof(type_id) =="undefined" || type_id =="") type_id="0";
	location.href="http://search.pudn.com/Download/index?keyword="+keyword;
	
	return false;
});
</script>
<script type="text/javascript" src="/js/time.js"></script>


<script type="text/javascript" src="/js/marked.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('.hide-list').each(function(){
			if ($(this)[0].offsetHeight < $(this)[0].scrollHeight){
				var id=$(this).attr('id');
				id =id.substring(5);
				$(this).after('<div style="text-align:center"><a href="" class="list-more" data-id="' + id + '"><i class="fa fa-angle-double-down"></i></a></div>');
			}
		});
	});
	var g_id="1701258135909523";
	var keywords =new Array();
	keywords[0] ='atomone';	function get_download_user(){
		var url ="/Download/get_download_user/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html>'+ret[i].name+'</a> ';
			}
			$('#download-users').append(html);
		});
	}
	
	function get_relate_item(){
		var url ="/Download/get_relate_item/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			var intro;
			for(i in ret){
				intro =ret[i].intro;
				for(j in keywords){
					var reg =new RegExp(keywords[j],'gmi');
					intro =intro.replace(reg,'<font color=brown>'+keywords[j]+'</font>');
				}
				html =html + '[<a href=/Download/item/id/'+ret[i].new_id+'.html>'+ret[i].name+'</a>]&nbsp; '+intro+'<BR>';
			}
			$('#relate-items').append(html);
		});
		
	}
	function get_score_name(score){
		switch(score){
		case '100': return '很好，推荐下载';
		case '85': return '还不错';
		case '75': return '一般，勉强可用';
		case '50': return '差';
		case '3': return '纯粹是垃圾';
		case '40': return '和说明完全不符';
		case '20': return '文件不全';
		case '10': return '不是源代码或资料';
		case '5': return '文件有密码，不知道密码';
		case '0': return '不能解压或下载失败';
		}
		return '';
	}
	function get_comment(){
		var url ="/Download/get_comments/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var total_count =ret.total_count;
			var data =ret.data;
			var html='';
			for(i in data){
				html =html + '<a href="/User/profile/id/'+data[i].user_new_id+'.html" class="uploader">'+data[i].user_name+'</a>: <span class="comment-score">'+get_score_name(data[i].score)+'</span>, '+data[i].content+'<BR>';
			}
			$('#file-comments').append(html);
		});
		
	}
	function get_favor(){
		var url ="/Download/get_item_favors/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html class=user>'+ret[i].name+'</a>&nbsp;';
			}
			$('#favor-users').html(html);
		});
	}
	// 得到下载这个的用户又下载了什么
	function get_more_download(){
		
	}
	// 得到下载这个的用户又搜索了什么
	function get_more_keyword(){
		
	}
	
	// 得到论坛相关问题
	function get_bbs(){
		
	}
	
	// 得到软件工场相关内容
	function get_works(){
		
	}
	
	// 得到相关聊天室
	function get_chat(){
		
	}
	
	// 得到相关软件商城信息
	function get_shop(){
		
	}
	
	// 得到job
	
	// 得到学习内容

	// 数据
	get_download_user();
	//get_relate_item();
	get_comment();
	get_favor();
	
	$('.vote-up').click(function(){
		var url="/Download/vote/t/up/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
				if(ret.url.length >0)
					location.href=ret.url;
			}
			else{
				var s =$('#vote-up-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-up-count').html(count);
			}
		})
		return false;
	});
	$('.vote-down').click(function(){
		var url="/Download/vote/t/down/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0)
				alert(ret.info);
			else{
				var s =$('#vote-down-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-down-count').html(count);
			}
		})
		return false;
	});
	$('.favor-item').click(function(){
		var url="/Favor/add/t/0/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
			}
			else{
				var s =$('#favor-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#favor-count').html(count);
			}
		})
		return false;
	});
	$('.pop-a').click(function(){
		var url=$(this).attr('href');
		$.get(url,function(ret){
			alert(ret.info);
			//location.reload();
		})
		return false;
	});

document.getElementById('readme').innerHTML =marked.parse(document.getElementById('readme').innerHTML);
</script>



</html>