
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>libgen 联合开发网 - pudn.com</title>

    <link href="/Public/m/css/bootstrap.min.css" rel="stylesheet">
    <link href="/Public/m/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/Public/m/css/animate.css" rel="stylesheet">
    <link href="/Public/m/css/style.css" rel="stylesheet">

	<link href="/Public/m/css/plugins/slick/slick.css" rel="stylesheet">
	<link href="/Public/m/css/plugins/slick/slick-theme.css" rel="stylesheet">

	

	<link href="/css/style.css" rel="stylesheet">

	<!-- Mainly scripts -->
	<script src="/Public/m/js/jquery-2.1.1.js"></script>
	<script src="/Public/m/js/bootstrap.min.js"></script>

	<script src="/Public/m/js/plugins/metisMenu/jquery.metisMenu.js"></script>
	<script src="/Public/m/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

	<!-- Custom and plugin javascript -->
	<script src="/Public/m/js/inspinia.js"></script>
	<script src="/Public/m/js/plugins/pace/pace.min.js"></script>
	
<META name="Keywords" content="libgen 程序员 编程 源码 源代码 下载">

	
<META name="Description" content="libgen Node.js的Genesis API库（及更多）">

</head>

<body>

<!-- /.main-container start -->

<div class="pace  pace-inactive">
  	<div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  	<div class="pace-progress-inner"></div>
	</div>
	<div class="pace-activity"></div>
</div>

<div class="all-content">
	<div class="my-container top-navigation">
		<nav class="navbar navbar-static-top" role="navigation">
			<div class="navbar-header">
				<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
					<i class="fa fa-reorder"></i>
				</button>
				<a href="http://www.pudn.com" class="navbar-brand">联合开发网</a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav">
					<li>
						<a href="/" style="padding-right:8px;padding-left:8px;font-size:16px">首页</a>
					</li>
					<li>
						<a href="https://search.pudn.com" style="padding-right:8px;padding-left:8px;font-size:16px">搜索</a>
					</li>
				</ul>
               	<ul class="nav navbar-top-links navbar-right">
               							<li>
                       	<a href="/User/login.html">
                           	&nbsp; <i class="fa fa-sign-out"></i>登录
                       	</a>
                   	</li>
                   	<li>
                       	<a href="/User/reg.html"><i class="fa fa-sign-out"></i>注册
                       	</a>
                   	</li>
					               	</ul>
			</div>
		</nav>
	</div>
	<form action="https://search.pudn.com/Download" method="get">
	<div class="top-menu-line2">
		<div class="my-container">
			<a href=/Download/upload.html>上传</a>
			&nbsp; <a href=/User>管理</a>
			&nbsp; <a href=https://search.pudn.com/Download>搜索</a>
			&nbsp; <a href=/Guestbook>留言</a>
			<div class="input-group pull-right" style="max-width:200px;margin:3px 15px 0px 0px">
				<input type="text" name="keyword" maxlength=20 placeholder="请输入关键字" class="form-control input-sm">
				<span class="input-group-btn"> <button type="submit" class="btn btn-white input-sm" style="border:1px solid #AAA"><i class="fa fa-search"></i></button>
				</span>
			</div>
		</div>
	</div></form>



<div class="row wrapper white-bg">
	<div class="my-container">
			<div class="nav-dir" style="padding:10px 0px">
				<a href="/">Pudn.com</a>&nbsp;&gt;&nbsp;下载中心
				&nbsp;&gt;&nbsp;JavaScript/JQuery				&nbsp;&gt;&nbsp;<font color=red>libgen</font>
			</div>


		<div class="row">
			<div class="col-xs-12 col-md-8">
				<div class="item-name">libgen</div>
				<div class="item-keyword">
									</div>
				<div class="item-action">
					<div class="btn-group">
						<a href=/Download/dl/id/1678352488978113 target=_blank class="btn btn-primary btn-sm"><i class="fa fa-download"></i> 下载(<span id="down-count">0</span>)</a>
						<a href="###" class="btn btn-white btn-sm vote-up"><i class="fa fa-thumbs-up"></i> 赞(<span id="vote-up-count">202</span>) </a>
						<a href="###" class="btn btn-white btn-sm vote-down"><i class="fa fa-thumbs-down"></i> 踩(<span id="vote-down-count">0</span>) </a>
						<a href="/Download/comment/id/1678352488978113" data-toggle="modal" data-target="#myModal" class="btn btn-white btn-sm"><i class="fa fa-comment"></i> 评论(<span id="comment-count">0</span>) </a>
						<a href="###" class="btn btn-white btn-sm favor-item"><i class="fa fa-heart"></i> 收藏(<span id="favor-count">0</span>) </a>
					</div>
				</div>
				<hr>

				<div class="item-info">
					<B>所属分类</B>：JavaScript/JQuery<BR>
					<B>开发工具</B>：JavaScript<BR>
					<B>文件大小</B>：885KB<BR>
					<B>下载次数</B>：0<BR>
					<B>上传日期</B>：2023-03-09 17:01:28<BR>
					<B>上 传 者</B>：<a href=/User/profile/id/1682139907912860.html>sh-1993</a><BR>
				</div>
				<div class="item-intro">
					说明：&nbsp;&nbsp;Node.js的Genesis API库（及更多）<BR>(The Library Genesis API (and more) for Node.js)				</div>
				<hr>
				<div><B>文件列表</B>: </div>
				<div id="file-list">
				libgen.<B>js-trunk</B> (0, 2023-03-10)<BR>libgen.js-trunk\.<B>jshintrc</B> (96, 2023-03-10)<BR>libgen.js-trunk\.mocharc.<B>yaml</B> (19, 2023-03-10)<BR>libgen.js-trunk\.travis.<B>yml</B> (72, 2023-03-10)<BR>libgen.<B>js-trunk\LICENSE</B> (1083, 2023-03-10)<BR>libgen.js-trunk\available_mirrors.<B>js</B> (205, 2023-03-10)<BR>libgen.js-trunk\changelog.<B>md</B> (2009, 2023-03-10)<BR>libgen.<B>js-trunk\examples</B> (0, 2023-03-10)<BR>libgen.js-trunk\examples\get_latest_text.<B>js</B> (496, 2023-03-10)<BR>libgen.js-trunk\examples\grab_rand_texts.<B>js</B> (585, 2023-03-10)<BR>libgen.js-trunk\examples\random_filtered.<B>js</B> (748, 2023-03-10)<BR>libgen.js-trunk\examples\sample_search.<B>js</B> (695, 2023-03-10)<BR>libgen.js-trunk\index.<B>js</B> (352, 2023-03-10)<BR>libgen.<B>js-trunk\lib</B> (0, 2023-03-10)<BR>libgen.js-trunk\lib\check.<B>js</B> (203, 2023-03-10)<BR>libgen.js-trunk\lib\clean.<B>js</B> (1500, 2023-03-10)<BR>libgen.js-trunk\lib\latest.<B>js</B> (1267, 2023-03-10)<BR>libgen.js-trunk\lib\random.<B>js</B> (2513, 2023-03-10)<BR>libgen.js-trunk\lib\search.<B>js</B> (5505, 2023-03-10)<BR>libgen.js-trunk\lib\speed.<B>js</B> (1825, 2023-03-10)<BR>libgen.js-trunk\package-lock.<B>json</B> (158416, 2023-03-10)<BR>libgen.js-trunk\package.<B>json</B> (623, 2023-03-10)<BR>libgen.js-trunk\renovate.<B>json</B> (69, 2023-03-10)<BR>libgen.<B>js-trunk\test</B> (0, 2023-03-10)<BR>libgen.<B>js-trunk\test\async</B> (0, 2023-03-10)<BR>libgen.js-trunk\test\async\queries.<B>js</B> (4821, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings</B> (0, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283</B> (0, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\latest-id_2650848805</B> (0, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\latest-id_2650848805\should-return-a-number-over-1282650_1416712994</B> (0, 2023-03-10)<BR>libgen.js-trunk\test\async\recordings\async-queries_2979156283\latest-id_2650848805\should-return-a-number-over-1282650_1416712994\recording.<B>har</B> (23161, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\latest-text_1140435231</B> (0, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\latest-text_1140435231\should-return-a-JSON-object_701473970</B> (0, 2023-03-10)<BR>libgen.js-trunk\test\async\recordings\async-queries_2979156283\latest-text_1140435231\should-return-a-JSON-object_701473970\recording.<B>har</B> (27830, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\random-text_3670930931</B> (0, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\random-text_3670930931\should-return-a-PDF-from-2000-with-a-Title_1482663484</B> (0, 2023-03-10)<BR>libgen.js-trunk\test\async\recordings\async-queries_2979156283\random-text_3670930931\should-return-a-PDF-from-2000-with-a-Title_1482663484\recording.<B>har</B> (342449, 2023-03-10)<BR>libgen.<B>js-trunk\test\async\recordings\async-queries_2979156283\random-text_3670930931\should-return-one-JSON-object_1821269865</B> (0, 2023-03-10)<BR>... ...<BR>				</div>
				<hr>
				<div id="readme">
				[![Build Status](https://travis-ci.org/dunn/libgen.js.svg?branch=master)](https://travis-ci.org/dunn/libgen.js)

<!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc -->
**Table of Contents**

- [`libgen`](#libgen)
    - [installation](#installation)
    - [first, a warning](#first-a-warning)
    - [usage: choosing a mirror](#usage-choosing-a-mirror)
    - [usage: searching](#usage-searching)
    - [usage: latest upload](#usage-latest-upload)
    - [usage: random texts](#usage-random-texts)
    - [usage: utilities](#usage-utilities)
        - [check.hasField (synchronous)](#checkhasfield-synchronous)
        - [check.canDownload (asynchronous)](#checkcandownload-asynchronous)
        - [clean.forFields (synchronous)](#cleanforfields-synchronous)
        - [clean.dups (synchronous)](#cleandups-synchronous)
- [other platforms](#other-platforms)
    - [library](#library)
    - [cli](#cli)

<!-- markdown-toc end -->

# `libgen`

This is a Node.js wrapper for the
[Library Genesis](http://gen.lib.rus.ec) API, with search built on top
of it.

Tested with Node 10 and above.

**Reminder:** Library Genesis (with which I am not affiliated) is
asking for donations to support maintenance costs and to establish new
mirrors: <http://gen.lib.rus.ec/donate/>.

## installation

```
npm install libgen
```

## first, a warning

The Library Genesis maintainers very kindly made a public API that
doesn't require an API key to use, so don't abuse it or they might
change that.

In any case, if you make too many requests in a short period of time
they'll temporarily block your IP address, so go slow for your own
good as well.

## usage: choosing a mirror

This method tests the mirrors in `available_mirrors.js` (currently
`http://libgen.is` and `http://gen.lib.rus.ec`) and returns the one
that is fastest.

```js
const urlString = await libgen.mirror()
console.log(`${urlString} is currently fastest`)
```

## usage: searching

The search method has two required options, and a number of optional ones:

- **mirror**—One of the mirrors in `available_mirrors.js`
- **query**—The string to search for.
- **count** (optional)—The number of results to return; defaults to 10.
- **offset** (optional)—The number of results to offset from start; defaults to 0.
- **search_in** (optional)—Restrict your search to one of the
  following fields:
    - `title`
    - `author`
    - `series`
    - `periodical`
    - `publisher`
    - `year`
    - `identifier`
    - `md5`
    - `extension`
    - `def` (default; all fields)
- **sort_by** (optional)—The field by which the results are sorted:
    - `title`
    - `publisher`
    - `year`
    - `pages`
    - `language`
    - `filesize`
    - `extension`
    - `def` (default; sorted by relevance)
- **reverse** (optional)—If `false`, sorts from A–Z or 0–9
  (depending on whether `sort_by` is a text or number field);
  when `true` sorts Z–A or 9–0.  Defaults to `false`.

Pass the options to the function as an object:

```js
const options = {
  mirror: 'http://gen.lib.rus.ec',
  query: 'cats',
  count: 5,
  sort_by: 'year',
  reverse: true
}
```

Then do the thing:

```js
try {
  const data = await libgen.search(options)
  let n = data.length
  console.log(`${n} results for "${options.query}"`)
  while (n--){
    console.log('');
    console.log('Title: ' + data[n].title)
    console.log('Author: ' + data[n].author)
    console.log('Download: ' +
                'http://gen.lib.rus.ec/book/index.php?md5=' +
                data[n].md5.toLowerCase())
  }
} catch (err) {
  console.error(err)
}
```

`libgen` returns the full JSON objects
[provided by the API](http://garbage.world/posts/libgen/ "A guide to the
Library Genesis API"), though many of the metadata fields will be
empty for any given text.

Search is not very fast, partly because the `search` method always makes at
least two HTTP requests: at least one during the initial search (more than one
if we need to work through multiple pages of results), then another where we
send the IDs—scraped from the search results page—to the API.  We could get most
of the metadata from the search page without then going to the API, but this way
the behavior is consistent between `search` and the other methods; all return
the same full JSON objects.

## usage: latest upload

This method requires a URL string—one of the mirrors in
`available_mirrors.js`

```js
(async () => {
  try {
    const text = await libgen.latest.text('http://libgen.is')
    console.log('Last text uploaded to Library Genesis')
    console.log('Title: ' + text.title)
    console.log('Author: ' + text.author)
    console.log('Download: ' +
                'http://libgen.is/book/index.php?md5=' +
                text.md5.toLowerCase())
    return true
  } catch(err) {
      return console.dir(err)
  }
})();
```

You can also do `libgen.latest.id` in the same style—that just returns
a number, corresponding to the LibGen ID of the most recently added
text.

## usage: random texts

This has two required options, and an optional third:

- **mirror**—One of the mirrors in `available_mirrors.js`
- **count**—The number of texts to return.
- **fields** (optional)—An array containing the metadata fields that
  must be set for each text returned; there are
  [52 metadata fields](http://megr.im/posts/libgen/#toc_1 "The Library
  Genesis API (scroll down a bit)"), but some are rarely used.  The
  array can include strings, corresponding to fields that must have
  *some* setting, or objects with Key/Value corresponding to the field
  and the value that field must have (example below).  Keep in mind
  that requests that have multiple required fields will take
  exponentially more time to complete.

Put the options in an object, and pass it to `libgen.random.text`:

```js
(async () => {
  const options = {
    mirror: "http://libgen.is",
    count: 5,
    fields: [
      "Title",
      { year: "2000",
        extension: "pdf" }
    ]
  }

  try {
    const data = await libgen.random.text(options)
    let n = data.length
    console.log(n + " random PDFs from 2000 with titles")
    while (n--) {
      console.log("")
      console.log("Title: " + data[n].title)
      console.log("Author: " + data[n].author)
      console.log("Year: " + data[n].year)
      console.log("Download: " +
                  "http://gen.lib.rus.ec/book/index.php?md5=" +
                  data[n].md5.toLowerCase())
    }
    return true
  } catch (err) {
    return console.error(err)
  }
})();
```

## usage: utilities

A handful of utility methods are available for checking and cleaning
output.

### check.hasField (synchronous)

```js
const isGood = libgen.utils.check.hasField(json,field[,value]);
```

- **array**—A LibGen JSON object.
- **field**—One of the metadata fields.
- **value** (optional)—the value of the specified metadata field.

If a `value` is given, this method returns `true` just in case the
specified field of the JSON object is set to `value`.  Otherwise it
returns true just in case the specified field is set at all.  All
other cases return `false`.

### check.canDownload (asynchronous)

Given a LibGen JSON object or just an MD5, this method returns the
download URL of a text just in case there's a direct download link
available:

```js
const md5 = 'ec1b68f07f01c7e4fb7a8c6af2431cd6'
try {
  const url = await libgen.utils.check.canDownload(md5)
  console.log('Working link: ' + url)
} catch (err) {
  console.error(err)
}
```

Note that even if this method returns an error, the text may be
available at one of
[the mirrors that do not offer direct download links](http://garbage.world/posts/libgen/
"Scroll down past the first example").

### clean.forFields (synchronous)

Given a LibGen JSON object or an array of objects, this method removes
any that don't have the specified fields and/or field values:

```js
const cleaned = libgen.utils.clean.forFields(json,fields);
```

Pass an array of strings and/or objects to `fields`, as in
`random.text` above.

### clean.dups (synchronous)

Given an array of LibGen JSON objects, this method returns all unique
elements in the array:

```js
const uniques = libgen.utils.clean.dups(array);
```

## developing

HTTP requests are mocked in the specs using
[Polly](https://netflix.github.io/pollyjs/).  To force Polly to re-record HTTP
interactions, run with `VCR_MODE=record npm test` (defaults to `replay`).

# other platforms

## library
- **Ruby:** <https://github.com/Sag0Sag0/libgen_api/>
- **Python:** <https://github.com/mmarquezs/libgen-python-api>

## cli
- **Go:** <https://github.com/ciehanski/libgen-cli>
- **Python:** <https://github.com/adolfosilva/libgen.py>
				</div>
				<hr>
				<div><B>近期下载者</B>：</div>
				<div id="download-users"></div>
				<hr>
				<div><B>相关文件</B>：</div>
				<div id="relate-items"></div>
				<hr>
				<div><B>评论</B>：[<a href=/Download/comment/id/1678352488978113.html data-toggle=modal data-target="#myModal">我要评论</a>]&nbsp;[<a class='pop-a' href=/Download/report/id/1678352488978113.html>举报此文件</a>]</div>
				<div id="file-comments"></div>
				<hr>
				<div><B>收藏者</B>：</div>
				<div id="favor-users"></div>
				<p></p>
			</div>

			<div class="col-xs-12 col-md-4">

				<div class="ad-sidebar text-center">
					<div class="ad-300">
					</div>
				</div>
			</div>
		</div>

	</div>
</div>



	<div class="my-footer">
		<div class="container">
		<div class="pull-right">
		</div>

		<div>
			
			<a href="http://www.pudn.com" target=_blank>© 联合开发网 from 2004</a> | 
			<a href="/Index/contact.html">联系站长</a> | 
			<a href=" https://beian.miit.gov.cn" target=_blank>湘ICP备2023001425号</a> | 
			<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010502000604" target=_blank>网安备43010502000604</a> | 
		</div>
		</div>
	</div>


</div><!-- /wrapper-->




<!-- page specific plugin scripts -->

<!-- inline scripts related to this page -->

<div id="myModal" class="modal fade" tabindex="-1" 
			role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			
		</div>
	</div>
</div><!-- /.modal-table -->

</body>

<script type="text/javascript">
$(document).on('click', '.list-more', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height',$('#list-'+id)[0].scrollHeight);
	$(this).removeClass('list-more');
	$(this).addClass('list-hide');
	$(this).html('<i class="fa fa-angle-double-up"></i>');
	
	//$(this).hide();

	return false;
});

$(document).on('click', '.list-hide', function(){
	var id=$(this).attr('data-id');
	$('#list-'+id).css('max-height','100px');
	$(this).removeClass('list-hide');
	$(this).addClass('list-more');
	$(this).html('<i class="fa fa-angle-double-down"></i>');
	
	return false;
});

$("#myModal").on("hidden.bs.modal", function() {
    $(this).removeData();
});

$(document).on("click",".keyword",function(){
	var keyword=$(this).attr("keyword");
	var type_id=$(this).attr("type_id");
	if(typeof(type_id) =="undefined" || type_id =="") type_id="0";
	location.href="http://search.pudn.com/Download/index?keyword="+keyword;
	
	return false;
});
</script>
<script type="text/javascript" src="/js/time.js"></script>


<script type="text/javascript" src="/js/marked.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('.hide-list').each(function(){
			if ($(this)[0].offsetHeight < $(this)[0].scrollHeight){
				var id=$(this).attr('id');
				id =id.substring(5);
				$(this).after('<div style="text-align:center"><a href="" class="list-more" data-id="' + id + '"><i class="fa fa-angle-double-down"></i></a></div>');
			}
		});
	});
	var g_id="1678352488978113";
	var keywords =new Array();
		function get_download_user(){
		var url ="/Download/get_download_user/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html>'+ret[i].name+'</a> ';
			}
			$('#download-users').append(html);
		});
	}
	
	function get_relate_item(){
		var url ="/Download/get_relate_item/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			var intro;
			for(i in ret){
				intro =ret[i].intro;
				for(j in keywords){
					var reg =new RegExp(keywords[j],'gmi');
					intro =intro.replace(reg,'<font color=brown>'+keywords[j]+'</font>');
				}
				html =html + '[<a href=/Download/item/id/'+ret[i].new_id+'.html>'+ret[i].name+'</a>]&nbsp; '+intro+'<BR>';
			}
			$('#relate-items').append(html);
		});
		
	}
	function get_score_name(score){
		switch(score){
		case '100': return '很好，推荐下载';
		case '85': return '还不错';
		case '75': return '一般，勉强可用';
		case '50': return '差';
		case '3': return '纯粹是垃圾';
		case '40': return '和说明完全不符';
		case '20': return '文件不全';
		case '10': return '不是源代码或资料';
		case '5': return '文件有密码，不知道密码';
		case '0': return '不能解压或下载失败';
		}
		return '';
	}
	function get_comment(){
		var url ="/Download/get_comments/id/"+g_id+'.html';
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var total_count =ret.total_count;
			var data =ret.data;
			var html='';
			for(i in data){
				html =html + '<a href="/User/profile/id/'+data[i].user_new_id+'.html" class="uploader">'+data[i].user_name+'</a>: <span class="comment-score">'+get_score_name(data[i].score)+'</span>, '+data[i].content+'<BR>';
			}
			$('#file-comments').append(html);
		});
		
	}
	function get_favor(){
		var url ="/Download/get_item_favors/id/"+g_id+".html";
		$.get(url,function(ret){
			if(ret.length ==0) return;
			var html='';
			for(i in ret){
				html =html + '<a href=/User/profile/id/'+ret[i].user_new_id+'.html class=user>'+ret[i].name+'</a>&nbsp;';
			}
			$('#favor-users').html(html);
		});
	}
	// 得到下载这个的用户又下载了什么
	function get_more_download(){
		
	}
	// 得到下载这个的用户又搜索了什么
	function get_more_keyword(){
		
	}
	
	// 得到论坛相关问题
	function get_bbs(){
		
	}
	
	// 得到软件工场相关内容
	function get_works(){
		
	}
	
	// 得到相关聊天室
	function get_chat(){
		
	}
	
	// 得到相关软件商城信息
	function get_shop(){
		
	}
	
	// 得到job
	
	// 得到学习内容

	// 数据
	get_download_user();
	//get_relate_item();
	get_comment();
	get_favor();
	
	$('.vote-up').click(function(){
		var url="/Download/vote/t/up/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
				if(ret.url.length >0)
					location.href=ret.url;
			}
			else{
				var s =$('#vote-up-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-up-count').html(count);
			}
		})
		return false;
	});
	$('.vote-down').click(function(){
		var url="/Download/vote/t/down/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0)
				alert(ret.info);
			else{
				var s =$('#vote-down-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#vote-down-count').html(count);
			}
		})
		return false;
	});
	$('.favor-item').click(function(){
		var url="/Favor/add/t/0/id/"+g_id;
		$.get(url,function(ret){
			if(ret.status==0){
				alert(ret.info);
			}
			else{
				var s =$('#favor-count').html();
				if(s =='') s="0";
				var count =parseInt(s)+1;
				$('#favor-count').html(count);
			}
		})
		return false;
	});
	$('.pop-a').click(function(){
		var url=$(this).attr('href');
		$.get(url,function(ret){
			alert(ret.info);
			//location.reload();
		})
		return false;
	});

document.getElementById('readme').innerHTML =marked.parse(document.getElementById('readme').innerHTML);
</script>



</html>